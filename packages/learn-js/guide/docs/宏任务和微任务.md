# 宏任务和微任务
宏任务和微任务都是在JavaScript的事件循环（Event Loop）中运行的。

# 宏任务
在JavaScript中，大部分代码都是以宏任务的形式运行的，包括但不限于script（整体代码），setTimeout，setInterval，setImmediate（Node.js环境）以及I/O等。这些都会创建一个宏任务。当事件循环开始运行时，它将会从任务队列中取出最早的宏任务开始执行。一旦宏任务执行完毕，事件循环就会去检查有没有其他的宏任务或者微任务需要执行。

# 微任务
微任务通常包括Promise，process.nextTick（Node.js环境），MutationObserver（浏览器环境）等。微任务的执行时机是在事件循环的末尾，也就是当宏任务执行完后，事件循环会查看有没有微任务需要执行。如果有微任务，就会立即执行，然后继续查看是否有更多的微任务，直到队列中没有微任务为止。然后再去检查是否有新的宏任务需要执行，如果没有就结束事件循环。
由于微任务会立即执行，所以如果有一个宏任务和一个微任务，那么微任务会比宏任务先执行。

